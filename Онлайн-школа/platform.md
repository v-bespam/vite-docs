---
date: 2024-10-10
tags:
  - Онлайн-школа
---
# PlatformModule

Модуль предназначен для работы с платформами Онлайн школы.

## PlatformController

В контроллере применяются следующие проверки

- ThrottlerGuard - ограничивает количество запросов от пользователя
- JWTGuard - проверят на валидность токен для доступа к методам
- SuperAdminRoleGuard - проверяет что у пользователя есть роль супер администратора

***

### Endpoints

Контроллер предоставляет следующие эндпоинты:

| Метод  | URL                        | Описание                       |
| ------ | -------------------------- | ------------------------------ |
| GET    | `platform/`     | Получение списка всех платформ |
| GET    | `platform/:id/` | Получение платформы по ID      |
| POST   | `platform/`     | Создание новой платформы       |
| PUT    | `platform/:id/` | Обновление данных платформы    |
| DELETE | `platform/:id/` | Удаление платформы             |

***

### Получение списка всех платформ

`GET platform/`

*Входные данные:* Отсутствуют

*Функционал:*

Выполняет поиск в базе данных всех платформ.

*Выходные данные:* Status: `200 OK`

Возвращает объекты с информацией о платформах.

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Получение платформы по ID

`GET platform/:id`

*Входные данные:*

- В URL запроса должен быть передан ID платформы

*Функционал:*

Выполняет поиск в базе данных платформы в соответствии с переданным ID. Если платформа с таким идентификатором не найдена, выбрасывает исключение NotFoundException с сообщением об ошибке "Платформа не найдена".

*Выходные данные:* Status: `200 OK`

Возвращает объект с информацией о платформе.

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Создание новой платформы

`POST platform/`

*Входные данные:*

- В тело запроса должны быть переданы следующие параметры (CreatePlatformDto):

```json
{
  name: string;
  ownerEmail: string;
  subscription: string;
}
```

*Функционал:*

Создает новый экземпляр платформы в базе данных, в соответствии с параметрами, переданными в запросе. В случае ошибки выбрасывает исключение BadRequestException с сообщением "Что-то пошло не так" и информацией об ошибке.

*Выходные данные:* Status: `201 Created`

Возвращает объект с информацией о созданной платформе.

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Обновление данных платформы

`PUT platform/:id/`

*Входные данные:*

- В URL запроса должен быть передан ID платформы
- В тело запроса должны быть переданы следующие параметры (UpdatePlatformDto):

```json
{
  name: string;
  ownerEmail: string;
}
```

*Функционал:*

Выполняет в базе данных поиск платформы, в соответствии с переданным ID. Если платформа не найдена, выбрасывает исключение NotFoundException с сообщением об ошибке "Платформа не найдена".

Выполняет сохранение переданных параметров для указанной платформы в базе данных, в случае ошибки выбрасывает исключение BadRequestException с сообщением "Что-то пошло не так" и информацией об ошибке.

*Выходные данные:* Status: `200 OK`

Возвращает объект с обновленной информацией о платформе.

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Удаление платформы

`DELETE platform/:id/`

*Входные данные:*

- В URL запроса должен быть передан ID платформы

*Функционал:*

Выполняет в базе данных поиск платформы, в соответствии с переданным ID. Если платформа не найдена, выбрасывает исключение NotFoundException с сообщением об ошибке "Платформа не найдена".

Выполняет удаление указанной платформы в базе данных, в случае ошибки выбрасывает исключение BadRequestException с сообщением "Что-то пошло не так" и информацией об ошибке.

*Выходные данные:* Status: `200 OK`

Возвращает объект с информацией об удаленной платформе.

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

***

## Зависимости (импортируемые модули)

- TypeOrmModule

***

## Используемый стэк

- JavaScript
- NestJS
- TypeScript
- Node.js